/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @format
 */
<<<<<<< HEAD

=======
>>>>>>> origin/Sophia's-branch
'use strict';

function extendsForProp(prop, types) {
  if (!prop.expression) {
    console.log('null', prop);
  }
<<<<<<< HEAD
  const name = prop.expression.name;
=======

  const name = prop.expression.name;

>>>>>>> origin/Sophia's-branch
  if (types[name] != null) {
    // This type is locally defined in the file
    return null;
  }
<<<<<<< HEAD
=======

>>>>>>> origin/Sophia's-branch
  switch (name) {
    case 'ViewProps':
      return {
        type: 'ReactNativeBuiltInType',
        knownTypeName: 'ReactNativeCoreViewProps',
      };
<<<<<<< HEAD
=======

>>>>>>> origin/Sophia's-branch
    default: {
      throw new Error(`Unable to handle prop spread: ${name}`);
    }
  }
}
<<<<<<< HEAD
=======

>>>>>>> origin/Sophia's-branch
function removeKnownExtends(typeDefinition, types) {
  return typeDefinition.filter(
    prop =>
      prop.type !== 'TSExpressionWithTypeArguments' ||
      extendsForProp(prop, types) === null,
  );
<<<<<<< HEAD
}

// $FlowFixMe[unclear-type] TODO(T108222691): Use flow-types for @babel/parser
=======
} // $FlowFixMe[unclear-type] TODO(T108222691): Use flow-types for @babel/parser
>>>>>>> origin/Sophia's-branch

function getExtendsProps(typeDefinition, types) {
  return typeDefinition
    .filter(prop => prop.type === 'TSExpressionWithTypeArguments')
    .map(prop => extendsForProp(prop, types))
    .filter(Boolean);
}
<<<<<<< HEAD
=======

>>>>>>> origin/Sophia's-branch
module.exports = {
  getExtendsProps,
  removeKnownExtends,
};
