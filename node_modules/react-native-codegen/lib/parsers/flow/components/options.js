/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @format
 */
<<<<<<< HEAD

'use strict';

// $FlowFixMe[unclear-type] there's no flowtype for ASTs

=======
'use strict';

// $FlowFixMe[unclear-type] there's no flowtype for ASTs
>>>>>>> origin/Sophia's-branch
function getCommandOptions(commandOptionsExpression) {
  if (commandOptionsExpression == null) {
    return null;
  }
<<<<<<< HEAD
  let foundOptions;
=======

  let foundOptions;

>>>>>>> origin/Sophia's-branch
  try {
    foundOptions = commandOptionsExpression.properties.reduce(
      (options, prop) => {
        options[prop.key.name] = (
          (prop && prop.value && prop.value.elements) ||
          []
        ).map(element => element && element.value);
        return options;
      },
      {},
    );
  } catch (e) {
    throw new Error(
      'Failed to parse command options, please check that they are defined correctly',
    );
  }
<<<<<<< HEAD
  return foundOptions;
}
=======

  return foundOptions;
}

>>>>>>> origin/Sophia's-branch
function getOptions(optionsExpression) {
  if (!optionsExpression) {
    return null;
  }
<<<<<<< HEAD
  let foundOptions;
=======

  let foundOptions;

>>>>>>> origin/Sophia's-branch
  try {
    foundOptions = optionsExpression.properties.reduce((options, prop) => {
      if (prop.value.type === 'ArrayExpression') {
        options[prop.key.name] = prop.value.elements.map(
          element => element.value,
        );
      } else {
        options[prop.key.name] = prop.value.value;
      }
<<<<<<< HEAD
=======

>>>>>>> origin/Sophia's-branch
      return options;
    }, {});
  } catch (e) {
    throw new Error(
      'Failed to parse codegen options, please check that they are defined correctly',
    );
  }
<<<<<<< HEAD
=======

>>>>>>> origin/Sophia's-branch
  if (
    foundOptions.paperComponentName &&
    foundOptions.paperComponentNameDeprecated
  ) {
    throw new Error(
      'Failed to parse codegen options, cannot use both paperComponentName and paperComponentNameDeprecated',
    );
  }
<<<<<<< HEAD
  return foundOptions;
}
=======

  return foundOptions;
}

>>>>>>> origin/Sophia's-branch
module.exports = {
  getCommandOptions,
  getOptions,
};
